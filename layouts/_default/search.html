{{ define "content" }}

<div class="outer">
  <div class="inner">
    <form class="search" id="mySearch">
       <label for="searchval">Search</label>
       <input type="text" name="q" id="searchval"></p>
    </form>
  <div id="result">
  </div>
  </div><!-- .inner-->
</div><!-- .outer -->
<script type="text/javascript">
document.getElementById('mySearch').addEventListener('submit', async event => {
  const result = await fetch('/.netlify/functions/searchIndex.json?search=${event.target.searchstr.value}').then(x => x.json())
  document.getElementById('result').innerText = JSON.stringify(result, null, 2)
})
</script>
{{ end }}
