{{ define "content" }}

<div class="outer">
  <div class="inner">
  <a href="/search" id="search-link">Search</a>
  <form action="https://www.google.com/search" method="get" class="search">
    <input type="hidden" name="q" id="q" value="site:dsowebsite-179d5.netlify.app">
    <label for="search-str">Search <small></label>
    <input type="text" name="q" id="search-str"></p>
    <button type="submit" class="submit">Search with Google</button>
  </form>
  </div><!-- .inner-->
</div><!-- .outer -->

<script type="text/javascript">
// attach a click handler to the search link
 var btn = document.querySelector('#search-link');
 btn.addEventListener('click', function(event) {
  // don't navigate to that page. Stay put.
  event.preventDefault();
  // get the data
  const searchIndex;
  fetch('/searchIndex.json').then(function(response) {
   return response.json();
  }).then(function(response) {
  searchIndex = response.search;
  });
// look for matches in each item in the JSON
var results = [];
for(var item in searchIndex ) {
  var found = searchIndex[item].text.indexOf(searchString);
  if(found != -1 ) {
    results.push(searchIndex[item])
  }
}
}, false);
</script>
